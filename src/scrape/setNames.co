request = require \request
cheerio = require \cheerio

getSetNames = (cb) ->
  request \http://gatherer.wizards.com/Pages/Default.aspx (err, res, html) ->
    if err
      cb err
    else
      setNames = parse html
      cb null, setNames

parse = (html) ->
  setNames = []
  $ = cheerio.load html
  $ '#ctl00_ctl00_MainContent_Content_SearchControls_setAddText option' .each ->
    if $(@).text!.trim!
      setNames.push that
  setNames

module.exports = getSetNames
